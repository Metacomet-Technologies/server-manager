import{G as x,j as e,S as h,x as u}from"./app2.js";import{L as g}from"./Layout.js";function v({session:t,users:d,sharedUsers:i}){const{data:n,setData:a,post:c,delete:l,processing:r}=x({user_id:"",can_execute:!1}),o=s=>{s.preventDefault(),c(route("server-manager.sessions.share.store",t.id),{onSuccess:()=>{a({user_id:"",can_execute:!1})}})},m=s=>{confirm("Are you sure you want to revoke access for this user?")&&l(route("server-manager.sessions.share.destroy",[t.id,s]))};return e.jsxs(g,{children:[e.jsx(h,{title:`Share Session - ${t.name||"Unnamed Session"}`}),e.jsx("div",{className:"py-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Share Session"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-600",children:[t.name||"Unnamed Session"," on ",t.server.name]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[e.jsx("div",{children:e.jsx("div",{className:"bg-white shadow sm:rounded-lg",children:e.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:"Share with User"}),e.jsxs("form",{onSubmit:o,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"user_id",className:"block text-sm font-medium text-gray-700",children:"Select User"}),e.jsxs("select",{id:"user_id",name:"user_id",value:n.user_id,onChange:s=>a("user_id",s.target.value),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",required:!0,children:[e.jsx("option",{value:"",children:"Choose a user..."}),d.map(s=>e.jsxs("option",{value:s.id,children:[s.name," (",s.email,")"]},s.id))]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"can_execute",name:"can_execute",type:"checkbox",checked:n.can_execute,onChange:s=>a("can_execute",s.target.checked),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"can_execute",className:"ml-2 block text-sm text-gray-900",children:"Allow command execution"})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Users with view-only access can see the terminal output but cannot execute commands."})]}),e.jsx("div",{className:"mt-5",children:e.jsx("button",{type:"submit",disabled:r,className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:r?"Sharing...":"Share Session"})})]})]})})}),e.jsx("div",{children:e.jsx("div",{className:"bg-white shadow sm:rounded-lg",children:e.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:"Shared With"}),i.length>0?e.jsx("ul",{className:"divide-y divide-gray-200",children:i.map(s=>e.jsx("li",{className:"py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.user.name}),e.jsx("p",{className:"text-sm text-gray-500",children:s.user.email}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:s.can_execute?"Can execute commands":"View only"})]}),e.jsx("button",{onClick:()=>m(s.user.id),className:"text-sm text-red-600 hover:text-red-900",children:"Revoke"})]})},s.user.id))}):e.jsx("p",{className:"text-sm text-gray-500",children:"This session is not shared with anyone."})]})})})]}),e.jsx("div",{className:"mt-6",children:e.jsx(u,{href:route("server-manager.sessions.index"),className:"text-sm text-gray-600 hover:text-gray-900",children:"‚Üê Back to Sessions"})})]})})]})}export{v as default};
