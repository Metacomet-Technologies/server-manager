import{u,j as e,H as h,L as g}from"./app2.js";import{L as j}from"./Layout.js";function y({session:i,users:d,sharedUsers:a}){const{data:r,setData:t,post:n,delete:c,processing:l}=u({user_id:"",can_execute:!1}),o=s=>{s.preventDefault(),n(route("server-manager.sessions.share.store",i.id),{onSuccess:()=>{t({user_id:"",can_execute:!1})}})},m=s=>{confirm("Are you sure you want to revoke access for this user?")&&c(route("server-manager.sessions.share.destroy",[i.id,s]))};return e.jsxs(j,{children:[e.jsx(h,{title:`Share Session - ${i.name||"Unnamed Session"}`}),e.jsx("div",{className:"py-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Share Session"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-600",children:[i.name||"Unnamed Session"," on ",i.server.name]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[e.jsx("div",{children:e.jsx("div",{className:"bg-white shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[e.jsx("h3",{className:"mb-4 text-lg font-medium leading-6 text-gray-900",children:"Share with User"}),e.jsx("form",{onSubmit:o,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"user_id",className:"block text-sm font-medium text-gray-700",children:"Select User"}),e.jsxs("select",{id:"user_id",name:"user_id",value:r.user_id,onChange:s=>t("user_id",s.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-xs focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",required:!0,children:[e.jsx("option",{value:"",children:"Choose a user..."}),d.filter(s=>!a.some(x=>x.user_id===s.id)).map(s=>e.jsxs("option",{value:s.id,children:[s.name," (",s.email,")"]},s.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"can_execute",checked:r.can_execute,onChange:s=>t("can_execute",s.target.checked),className:"rounded border-gray-300 text-indigo-600 shadow-xs focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Allow command execution"})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"If unchecked, user will have read-only access"})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:l||!r.user_id,className:"inline-flex justify-center rounded-md border border-transparent bg-indigo-600 px-4 py-2 text-sm font-medium text-white shadow-xs hover:bg-indigo-700 focus:outline-hidden focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:"Share Session"})})]})})]})})}),e.jsx("div",{children:e.jsx("div",{className:"bg-white shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[e.jsx("h3",{className:"mb-4 text-lg font-medium leading-6 text-gray-900",children:"Shared With"}),a.length>0?e.jsx("ul",{className:"divide-y divide-gray-200",children:a.map(s=>e.jsx("li",{className:"py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.user.name}),e.jsx("p",{className:"text-sm text-gray-500",children:s.user.email}),e.jsx("p",{className:"text-xs text-gray-400",children:s.permission==="execute"?"Can execute commands":"Read-only access"})]}),e.jsx("button",{onClick:()=>m(s.user_id),className:"inline-flex items-center rounded bg-red-100 px-2.5 py-1.5 text-xs font-medium text-red-700 hover:bg-red-200",children:"Revoke"})]})},s.id))}):e.jsx("p",{className:"text-sm text-gray-500",children:"This session is not shared with anyone yet."})]})})})]}),e.jsx("div",{className:"mt-6",children:e.jsx(g,{href:route("server-manager.sessions.index"),className:"inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-xs hover:bg-gray-50",children:"Back to Sessions"})})]})})]})}export{y as default};
