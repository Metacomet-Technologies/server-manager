import{G as h,r as g,j as e,S as f,x as y}from"./app2.js";import{L as v}from"./Layout.js";function N({server:i}){const{data:a,setData:r,put:m,processing:d,errors:t}=h({name:i.name,host:i.host,port:i.port,username:i.username,auth_type:i.auth_type,password:"",private_key:""}),[c,l]=g.useState(!1),x=s=>{s.preventDefault(),m(route("server-manager.servers.update",i.id))},u=s=>{const n=s.target.files[0];if(n){const o=new FileReader;o.onload=p=>{r("private_key",p.target.result)},o.readAsText(n)}};return e.jsxs(v,{children:[e.jsx(f,{title:`Edit ${i.name}`}),e.jsx("div",{className:"py-6",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"md:grid md:grid-cols-3 md:gap-6",children:[e.jsx("div",{className:"md:col-span-1",children:e.jsxs("div",{className:"px-4 sm:px-0",children:[e.jsx("h3",{className:"text-lg font-medium leading-6 text-gray-900",children:"Edit Server"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Update server connection details."}),e.jsx("p",{className:"mt-2 text-sm text-yellow-600",children:"Leave password/key empty to keep existing credentials."})]})}),e.jsx("div",{className:"mt-5 md:mt-0 md:col-span-2",children:e.jsx("form",{onSubmit:x,children:e.jsxs("div",{className:"shadow sm:rounded-md sm:overflow-hidden",children:[e.jsxs("div",{className:"px-4 py-5 bg-white space-y-6 sm:p-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Server Name"}),e.jsx("input",{type:"text",name:"name",id:"name",value:a.name,onChange:s=>r("name",s.target.value),className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",required:!0}),t.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.name})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-6",children:[e.jsxs("div",{className:"col-span-4",children:[e.jsx("label",{htmlFor:"host",className:"block text-sm font-medium text-gray-700",children:"Host"}),e.jsx("input",{type:"text",name:"host",id:"host",value:a.host,onChange:s=>r("host",s.target.value),className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",required:!0}),t.host&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.host})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{htmlFor:"port",className:"block text-sm font-medium text-gray-700",children:"Port"}),e.jsx("input",{type:"number",name:"port",id:"port",value:a.port,onChange:s=>r("port",s.target.value),className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",required:!0}),t.port&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.port})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700",children:"Username"}),e.jsx("input",{type:"text",name:"username",id:"username",value:a.username,onChange:s=>r("username",s.target.value),className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",required:!0}),t.username&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.username})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Authentication Type"}),e.jsxs("div",{className:"mt-2 space-x-4",children:[e.jsxs("label",{className:"inline-flex items-center",children:[e.jsx("input",{type:"radio",name:"auth_type",value:"password",checked:a.auth_type==="password",onChange:s=>r("auth_type",s.target.value),className:"form-radio text-indigo-600"}),e.jsx("span",{className:"ml-2",children:"Password"})]}),e.jsxs("label",{className:"inline-flex items-center",children:[e.jsx("input",{type:"radio",name:"auth_type",value:"key",checked:a.auth_type==="key",onChange:s=>r("auth_type",s.target.value),className:"form-radio text-indigo-600"}),e.jsx("span",{className:"ml-2",children:"SSH Key"})]})]})]}),a.auth_type==="password"?e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),e.jsx("input",{type:"password",name:"password",id:"password",value:a.password,onChange:s=>r("password",s.target.value),className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",placeholder:"Leave empty to keep existing"}),t.password&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.password})]}):e.jsxs("div",{children:[e.jsx("label",{htmlFor:"private_key",className:"block text-sm font-medium text-gray-700",children:"Private Key"}),e.jsx("div",{className:"mt-1 flex items-center",children:e.jsx("input",{type:"file",name:"private_key_file",id:"private_key_file",onChange:u,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100",accept:".pem,.key,.ppk,id_rsa,id_ed25519"})}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Or paste the key directly:"}),e.jsx("textarea",{name:"private_key",id:"private_key",rows:c?10:3,value:a.private_key,onChange:s=>r("private_key",s.target.value),onFocus:()=>l(!0),onBlur:()=>l(!1),className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md font-mono text-xs",placeholder:"Leave empty to keep existing"}),t.private_key&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.private_key})]})]}),e.jsxs("div",{className:"px-4 py-3 bg-gray-50 text-right sm:px-6",children:[e.jsx(y,{href:route("server-manager.servers.index"),className:"inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 mr-3",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:d,className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:d?"Saving...":"Save"})]})]})})})]})})})]})}export{N as default};
